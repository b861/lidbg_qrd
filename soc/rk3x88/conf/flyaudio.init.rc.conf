# "&" do this no block

echo ====flylink.start==== > /dev/lidbg_msg
sleep 2
mount -o remount rw /
cp flyapdata/flylink-tool/adb-ec /sbin/adb-ec
cp flyapdata/flylink-tool/usb_modeswitch-ec /sbin/usb_modeswitch-ec
chmod 6755 /sbin/adb-ec
chown root:root  /sbin/adb-ec
chmod 6755 /sbin/usb_modeswitch-ec
chown root:root /sbin/usb_modeswtich-ec
chmod 0755 /sbin
mount -o remount ro /
chmod 6755 /sbin/adb-ec
export HOME=/data
adb-ec kill-server
adb-ec start-server
sleep 1
mkdir /data/.android
cp flyapdata/flylink-tool/adbkey /data/.android/adbkey
cp flyapdata/flylink-tool/adbkey.pub  /data/.android/adbkey.pub
chmod 666 /data/.android/adbkey.pub
echo ====flylink.stop==== > /dev/lidbg_msg
chmod 777 /dev/video1


chmod 777 /dev/fly*
chmod 777 /dev/Fly*
chmod 777 /dev/lidbg*

#chmod 777 /dev/ttyS1
#/flysystem/bin/gocsdk /dev/ttyS1 921600 &


#add cmd before this.
#sleep 20
#am broadcast -a android.provider.Telephony.SECRET_CODE -d android_secret_code://4631 &
